<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Valuación HAY</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar Rediseñado -->
        <div class="sidebar">
            <div class="logo-container">
                <img src="img/logo.png" alt="HAY Evaluation" class="logo" onerror="this.style.display='none'">
            </div>
            <ul class="menu">
                <li class="active" data-step="evaluation">
                    <i class="fas fa-clipboard-list"></i>
                    <span>Nueva Evaluación</span>
                </li>
                <li data-step="history">
                    <i class="fas fa-history"></i>
                    <span>Historial</span>
                </li>
                <li data-step="reports">
                    <i class="fas fa-chart-pie"></i>
                    <span>Reportes</span>
                </li>
            </ul>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Barra superior -->
            <div class="top-bar">
                <div class="breadcrumbs">
                    <span id="current-step-name">Nueva Evaluación</span>
                </div>
                <div class="actions">
                    <button class="btn-help" title="Ayuda">
                        <i class="fas fa-question-circle"></i>
                    </button>
                </div>
            </div>

            <!-- Contenido dinámico -->
            <div class="dynamic-content">
                <!-- Paso 1: Descripción del Puesto -->
                <div class="step-content active" id="step-evaluation">
                    <div class="evaluation-wizard">
                        <!-- Barra de progreso -->
                        <div class="wizard-progress">
                            <div class="progress-steps">
                                <div class="step active" data-step="1">
                                    <div class="step-number">1</div>
                                    <div class="step-name">Descripción</div>
                                </div>
                                <div class="step" data-step="2">
                                    <div class="step-number">2</div>
                                    <div class="step-name">Know-How</div>
                                </div>
                                <div class="step" data-step="3">
                                    <div class="step-number">3</div>
                                    <div class="step-name">Solución</div>
                                </div>
                                <div class="step" data-step="4">
                                    <div class="step-number">4</div>
                                    <div class="step-name">Responsabilidad</div>
                                </div>
                                <div class="step" data-step="5">
                                    <div class="step-number">5</div>
                                    <div class="step-name">Resultados</div>
                                </div>
                            </div>
                            <div class="progress-bar">
                                <div class="progress" id="progress" style="width: 0%"></div>
                            </div>
                        </div>

                        <!-- Contenido de los pasos -->
                        <div class="wizard-content">
                            <!-- Paso 1 -->
                            <div class="wizard-step active" id="wizard-step-1">
                                <h2><i class="fas fa-file-alt"></i> Descripción del Puesto</h2>
                                <p class="step-description">Complete la información básica del puesto a evaluar</p>
                                
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="nombrePuesto">Nombre del Puesto*</label>
                                        <input type="text" id="nombrePuesto" required placeholder="Ej: Gerente de Marketing Digital">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="departamento">Departamento/Área*</label>
                                        <input type="text" id="departamento" required placeholder="Ej: Marketing">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="nivelReporte">Nivel de Reporte*</label>
                                        <select id="nivelReporte" required>
                                            <option value="">Seleccione nivel</option>
                                            <option value="altaDireccion">Alta Dirección</option>
                                            <option value="gerencia">Gerencia</option>
                                            <option value="supervision">Supervisión</option>
                                            <option value="operativo">Operativo</option>
                                        </select>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="descripcion">Descripción General*</label>
                                        <div class="input-hint">Máximo 500 caracteres (<span id="descripcion-counter">0</span>/500)</div>
                                        <textarea id="descripcion" rows="4" maxlength="500" required placeholder="Describa el propósito principal del puesto..."></textarea>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="responsabilidades">Responsabilidades Clave*</label>
                                        <div class="input-hint">Separe cada responsabilidad con punto y coma (;) - Máximo 10 items</div>
                                        <textarea id="responsabilidades" rows="4" required placeholder="1. Responsabilidad; 2. Otra responsabilidad..."></textarea>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="funciones">Funciones Específicas</label>
                                        <div class="input-hint">Opcional - Separe cada función con punto y coma (;) - Máximo 15 items</div>
                                        <textarea id="funciones" rows="4" placeholder="1. Función diaria; 2. Otra función..."></textarea>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="competencia">Competencias Requeridas</label>
                                        <div class="input-hint">Separe cada competencia con punto y coma (;)</div>
                                        <textarea id="competencia" rows="4" placeholder="1. Liderazgo; 2. Trabajo en equipo..."></textarea>
                                    </div>
                                </div>
                                
                                <div class="form-actions">
                                    <button class="btn-next" id="next-step-1">
                                        Siguiente <i class="fas fa-arrow-right"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Paso 2 -->
                            <div class="wizard-step" id="wizard-step-2">
                                <h2><i class="fas fa-brain"></i> Know-How</h2>
                                <p class="step-description">Evalúe las competencias requeridas para el puesto</p>
                                
                                <div class="dimension-card">
                                    <h3>Competencia Gerencial</h3>
                                    <p>Nivel de integración de funciones requerido</p>
                                    <select id="gerencial" class="dimension-select" required>
                                        <option value="">Seleccione nivel gerencial</option>
                                        <option value="I">I - Específica</option>
                                        <option value="II">II - Homogénea</option>
                                        <option value="III">III - Heterogénea</option>
                                        <option value="IV">IV - Amplia</option>
                                    </select>
                                    <div class="dimension-description" id="gerencial-desc"></div>
                                </div>
                                
                                <div class="dimension-card">
                                    <h3>Competencia Técnica</h3>
                                    <p>Nivel de conocimiento especializado requerido</p>
                                    <select id="tecnica" class="dimension-select" required>
                                        <option value="">Seleccione nivel técnico</option>
                                        <option value="A">A - Básico</option>
                                        <option value="B">B - Introductorio</option>
                                        <option value="C">C - General</option>
                                        <option value="D">D - Avanzado</option>
                                        <option value="E">E - Especializado</option>
                                        <option value="F">F - Especialización Madura</option>
                                        <option value="G">G - Especialización Amplia</option>
                                        <option value="H">H - Referente</option>
                                    </select>
                                    <div class="dimension-description" id="tecnica-desc"></div>
                                </div>
                                
                                <div class="dimension-card">
                                    <h3>Comunicación</h3>
                                    <p>Nivel de habilidades comunicacionales requeridas</p>
                                    <select id="comunicacion" class="dimension-select" required>
                                        <option value="">Seleccione nivel de comunicación</option>
                                        <option value="1">1 - Comunica</option>
                                        <option value="2">2 - Razonamiento</option>
                                        <option value="3">3 - Cambio de comportamientos</option>
                                    </select>
                                    <div class="dimension-description" id="comunicacion-desc"></div>
                                </div>
                                
                                <div class="form-actions">
                                    <button class="btn-prev" id="prev-step-2">
                                        <i class="fas fa-arrow-left"></i> Anterior
                                    </button>
                                    <button class="btn-next" id="next-step-2">
                                        Siguiente <i class="fas fa-arrow-right"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Paso 3 -->
                            <div class="wizard-step" id="wizard-step-3">
                                <h2><i class="fas fa-puzzle-piece"></i> Solución de Problemas</h2>
                                <p class="step-description">Evalúe la complejidad y autonomía en la resolución de problemas</p>
                                
                                <div class="dimension-card">
                                    <h3>Complejidad</h3>
                                    <p>Nivel de complejidad en la solución de problemas</p>
                                    <select id="complejidad" class="dimension-select" required>
                                        <option value="">Seleccione nivel de complejidad</option>
                                        <option value="1">1 - Repetitivo</option>
                                        <option value="2">2 - Con modelos</option>
                                        <option value="3">3 - Variable</option>
                                        <option value="4">4 - Adaptación</option>
                                        <option value="5">5 - Sin precedentes</option>
                                    </select>
                                    <div class="dimension-description" id="complejidad-desc"></div>
                                </div>
                                
                                <div class="dimension-card">
                                    <h3>Marco de Referencia</h3>
                                    <p>Nivel de autonomía y guía disponible</p>
                                    <select id="marco" class="dimension-select" required>
                                        <option value="">Seleccione marco de referencia</option>
                                        <option value="A">A - Rutina Estricta</option>
                                        <option value="B">B - Rutina</option>
                                        <option value="C">C - Semi-Rutina</option>
                                        <option value="D">D - Estandarizado</option>
                                        <option value="E">E - Definición Clara</option>
                                        <option value="F">F - Definición Amplia</option>
                                        <option value="G">G - Definición Genérica</option>
                                        <option value="H">H - Abstracto</option>
                                    </select>
                                    <div class="dimension-description" id="marco-desc"></div>
                                </div>
                                
                                <div class="form-actions">
                                    <button class="btn-prev" id="prev-step-3">
                                        <i class="fas fa-arrow-left"></i> Anterior
                                    </button>
                                    <button class="btn-next" id="next-step-3">
                                        Siguiente <i class="fas fa-arrow-right"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Paso 4 -->
                            <div class="wizard-step" id="wizard-step-4">
                                <h2><i class="fas fa-balance-scale"></i> Responsabilidad</h2>
                                <p class="step-description">Evalúe la autonomía e impacto del puesto</p>
                                
                                <div class="dimension-card">
                                    <h3>Libertad para Actuar</h3>
                                    <p>Nivel de autonomía en la toma de decisiones</p>
                                    <select id="libertad" class="dimension-select" required>
                                        <option value="">Seleccione nivel de libertad</option>
                                        <option value="A">A - Control Estricto</option>
                                        <option value="B">B - Control</option>
                                        <option value="C">C - Estandarizado</option>
                                        <option value="D">D - Regulación General</option>
                                        <option value="E">E - Dirección</option>
                                        <option value="F">F - Dirección General</option>
                                        <option value="G">G - Guía</option>
                                        <option value="H">H - Guía Estratégica</option>
                                    </select>
                                    <div class="dimension-description" id="libertad-desc"></div>
                                </div>
                                
                                <div class="dimension-card">
                                    <h3>Impacto</h3>
                                    <p>Magnitud del impacto de las decisiones</p>
                                    <select id="impacto" class="dimension-select" required>
                                        <option value="">Seleccione nivel de impacto</option>
                                        <option value="N">N - No cuantificada</option>
                                        <option value="1">1 - Muy pequeño</option>
                                        <option value="2">2 - Pequeño</option>
                                        <option value="3">3 - Medio</option>
                                        <option value="4">4 - Grande</option>
                                    </select>
                                    <div class="dimension-description" id="impacto-desc"></div>
                                </div>
                                
                                <div class="form-actions">
                                    <button class="btn-prev" id="prev-step-4">
                                        <i class="fas fa-arrow-left"></i> Anterior
                                    </button>
                                    <button class="btn-submit" id="calculate-results">
                                        <i class="fas fa-calculator"></i> Calcular Evaluación
                                    </button>
                                </div>
                            </div>

                            <!-- Paso 5: Resultados -->
                            <div class="wizard-step" id="wizard-step-5">
                                <h2><i class="fas fa-chart-bar"></i> Resultados de la Evaluación</h2>
                                <p class="step-description">Resumen de la valuación del puesto</p>
                                
                                <div class="result-summary">
                                    <div class="result-header">
                                        <h3 id="result-nombre">Nombre del Puesto</h3>
                                        <div class="result-score">
                                            <span>Puntaje Total</span>
                                            <span class="score-value" id="result-total">0</span>
                                        </div>
                                    </div>
                                    
                                    <div class="result-level">
                                        <span>Nivel HAY:</span>
                                        <span class="level-value" id="result-hay">No definido</span>
                                    </div>
                                    
                                    <div class="result-dimensions">
                                        <div class="dimension-result">
                                            <h4>Know-How</h4>
                                            <div class="dimension-score" id="result-knowhow">0 pts</div>
                                            <div class="dimension-detail" id="result-knowhow-detail"></div>
                                        </div>
                                        <div class="dimension-result">
                                            <h4>Solución Problemas</h4>
                                            <div class="dimension-score" id="result-solucion">0 pts</div>
                                            <div class="dimension-detail" id="result-solucion-detail"></div>
                                        </div>
                                        <div class="dimension-result">
                                            <h4>Responsabilidad</h4>
                                            <div class="dimension-score" id="result-responsabilidad">0 pts</div>
                                            <div class="dimension-detail" id="result-responsabilidad-detail"></div>
                                        </div>
                                    </div>
                                    
                                    <div class="result-profile">
                                        <h4>Perfil Detectado:</h4>
                                        <div class="profile-badge" id="result-perfil">
                                            <span id="profile-type">No definido</span>
                                            <span id="profile-desc"></span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="result-actions">
                                    <button class="btn-save" id="save-evaluation">
                                        <i class="fas fa-save"></i> Guardar Evaluación
                                    </button>
                                    <button class="btn-pdf" id="export-pdf">
                                        <i class="fas fa-file-pdf"></i> Exportar a PDF
                                    </button>
                                    <button class="btn-new" id="new-evaluation" onclick="resetearFormulario()">
                                        <i class="fas fa-plus"></i> Nueva Evaluación
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Vista de Historial -->
                <div class="step-content" id="step-history">
                    <div class="history-container">
                        <h2><i class="fas fa-history"></i> Historial de Evaluaciones</h2>
                        
                        <div class="search-container">
                            <div class="search-box">
                                <i class="fas fa-search"></i>
                                <input type="text" id="search-eval" placeholder="Buscar evaluaciones...">
                                <button class="btn-search" id="search-button">Buscar</button>
                            </div>
                            <div class="filter-options">
                                <select id="filter-date">
                                    <option value="all">Todas las fechas</option>
                                    <option value="today">Hoy</option>
                                    <option value="week">Esta semana</option>
                                    <option value="month">Este mes</option>
                                </select>
                                <select id="filter-level">
                                    <option value="all">Todos los niveles</option>
                                    <option value="1-7">Operativos Básicos</option>
                                    <option value="8-10">Operativos Avanzados</option>
                                    <option value="11-13">Supervisores</option>
                                    <option value="14-16">Supervisores Senior</option>
                                    <option value="17-19">Gerentes Medios</option>
                                    <option value="20-22">Gerentes Senior</option>
                                    <option value="23-24">Alta Dirección</option>
                                    <option value="25">Alta Dirección (Estratégico)</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="evaluations-grid" id="evaluations-list">
                            <!-- Las evaluaciones se cargarán aquí dinámicamente -->
                        </div>
                    </div>
                </div>

                <!-- Vista de Reportes -->
                <div class="step-content" id="step-reports">
                    <div class="reports-container">
                        <h2><i class="fas fa-chart-pie"></i> Reportes y Estadísticas</h2>
                        
                        <div class="reports-grid">
                            <div class="report-card">
                                <h3>Distribución por Niveles</h3>
                                <div class="chart-container">
                                    <canvas id="level-chart"></canvas>
                                </div>
                            </div>
                            
                            <div class="report-card">
                                <h3>Evolución Mensual</h3>
                                <div class="chart-container">
                                    <canvas id="trend-chart"></canvas>
                                </div>
                            </div>
                            
                            <div class="report-card">
                                <h3>Perfiles más Comunes</h3>
                                <div class="chart-container">
                                    <canvas id="profile-chart"></canvas>
                                </div>
                            </div>
                            
                            <div class="report-card">
                                <h3>Exportar Datos</h3>
                                <div class="export-options">
                                    <button class="btn-export" id="export-excel">
                                        <i class="fas fa-file-excel"></i> Excel
                                    </button>
                                    <button class="btn-export" id="export-all-pdf">
                                        <i class="fas fa-file-pdf"></i> PDF Completo
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="app.js"></script>
</body>
</html>